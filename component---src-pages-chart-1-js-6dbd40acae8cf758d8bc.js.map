{"version":3,"sources":["webpack:///./src/components/TVChartContainer/helpers.js","webpack:///./src/components/TVChartContainer/streaming.js","webpack:///./src/components/TVChartContainer/indicators/binance_open_interest.js","webpack:///./src/components/TVChartContainer/datafeed.js","webpack:///./src/components/TVChartContainer/index.js","webpack:///./src/pages/chart1.js","webpack:///./src/components/TVChartContainer/charting_library/charting_library.min.js"],"names":["makeApiRequest","path","a","fetch","response","json","Error","status","generateSymbol","exchange","fromSymbol","toSymbol","short","full","parseFullSymbol","fullSymbol","match","fragment","socket","io","channelToSubscription","Map","on","console","log","reason","error","data","split","eventTypeStr","tradeTimeStr","tradePriceStr","parseInt","tradePrice","parseFloat","tradeTime","channelString","subscriptionItem","get","undefined","barTime","date","bar","lastDailyBar","nextDailyBarTime","time","Date","setDate","getDate","getTime","open","high","low","close","Math","max","min","handlers","forEach","handler","callback","PineJS","name","metainfo","_metainfoVersion","id","description","shortDescription","scriptIdPart","is_price_study","is_hidden_study","isCustomIndicator","isTVScript","isTVScriptStub","inputs","plots","type","defaults","styles","plot_0","linestyle","visible","linewidth","plottype","trackPrice","transparency","color","plot_hidden","isHidden","precision","title","histogramBase","constructor","this","init","context","input","_context","_input","period","Std","t","symbol","ticker","substring","length","new_sym","main","select_sym","makeReq","endpoint","limit","proxy","res","ok","statusText","lastBarsCache","configurationData","supported_resolutions","exchanges","value","desc","symbols_types","getAllSymbols","allSymbols","pairs","Data","leftPairPart","symbols","map","rightPairPart","full_name","Object","keys","onReady","setTimeout","searchSymbols","userInput","symbolType","onResultReadyCallback","newSymbols","filter","isExchangeValid","isFullSymbolContainsInput","toLowerCase","indexOf","resolveSymbol","symbolName","onSymbolResolvedCallback","onResolveErrorCallback","symbolInfo","session","timezone","minmov","pricescale","has_intraday","has_no_volume","has_weekly_and_monthly","volume_precision","data_status","symbolItem","find","getBars","resolution","from","to","onHistoryCallback","onErrorCallback","firstDataRequest","parsedSymbol","bars","b","timestamp","timstamp","sumOpenInterest","noData","urlParameters","e","fsym","tsym","toTs","query","encodeURIComponent","join","Response","set","subscribeBars","onRealtimeCallback","subscribeUID","onResetCacheNeededCallback","push","emit","subs","subscribeOnStream","unsubscribeBars","subscriberUID","handlerIndex","findIndex","splice","delete","unsubscribeFromStream","TVChartContainer","tvWidget","componentDidMount","results","widgetOptions","props","datafeed","Datafeed","interval","container_id","containerId","library_path","libraryPath","locale","RegExp","exec","window","location","search","decodeURIComponent","replace","disabled_features","enabled_features","charts_storage_url","chartsStorageUrl","charts_storage_api_version","chartsStorageApiVersion","client_id","clientId","user_id","userId","fullscreen","autosize","studies_overrides","studiesOverrides","custom_indicators_getter","customIndicatorsGetter","widget","onChartReady","headerReady","then","button","createButton","setAttribute","classList","add","addEventListener","showNoticeDialog","body","innerHTML","chart","createStudy","componentWillUnmount","remove","render","className","React","defaultProps","Promise","resolve","BinanceOI","Chart1","Layout","includePreFooter","Component","assign","o","i","arguments","n","prototype","hasOwnProperty","call","s","Array","isArray","mobile","width","height","widgetbar","details","watchlist","watchlist_settings","default_symbols","overrides","trading_customization","position","order","brokerConfig","configFlags","debug","logo","time_frames","text","favorites","intervals","chartTypes","r","_id","random","toString","_ready","_readyHandlers","_onWindowResize","_autoResizeChart","bind","_options","preset","concat","warn","theme","loading_screen","backgroundColor","_create","_innerWindowLoaded","_innerWindow","onGrayedObjectClicked","_innerAPI","onShortcut","createShortcutAction","subscribe","unsubscribe","setLanguage","setSymbol","changeSymbol","removeEventListener","_iFrame","parentNode","removeChild","closePopupsAndDialogs","selectLineTool","selectedLineTool","save","saveChart","load","loadChart","extendedData","getSavedCharts","loadChartFromServer","saveChartToServer","removeChartFromServer","onContextMenu","showConfirmDialog","showLoadChartDialog","showSaveAsChartDialog","symbolInterval","getSymbolInterval","mainSeriesPriceFormatter","getIntervals","getStudiesList","addCustomCSSFile","applyOverrides","applyStudiesOverrides","watchList","activeChart","chartsCount","layout","setLayout","layoutName","changeTheme","takeScreenshot","lockAllDrawingTools","hideAllDrawingTools","magnetEnabled","magnetMode","undoRedoState","tradingViewApi","contentWindow","style","innerHeight","_render","document","getElementById","querySelector","widgetReady","initializationFinished","customFormatters","brokerFactory","tradingCustomization","disabledFeatures","enabledFeatures","restConfig","numeric_formatting","rss_news_feed","newsProvider","news_provider","loadLastChart","load_last_chart","saveLoadAdapter","save_load_adapter","settingsAdapter","settings_adapter","getCustomIndicators","saved_data","chartContent","Boolean","timeframe","toolbar_bg","studies_access","JSON","stringify","drawings_access","String","custom_css_url","auto_save_delay","snapshot_url","study_count_limit","symbol_search_request_delay","TradingView","version","defineProperty","exports"],"mappings":"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","file":"component---src-pages-chart-1-js-6dbd40acae8cf758d8bc.js","sourcesContent":["// Make requests to CryptoCompare API\nexport async function makeApiRequest (path) {\n  try {\n    const response = await fetch(`https://min-api.cryptocompare.com/${path}`)\n    return response.json()\n  } catch (error) {\n    throw new Error(`CryptoCompare request error: ${error.status}`)\n  }\n}\n\n// Generate a symbol ID from a pair of the coins\nexport function generateSymbol (exchange, fromSymbol, toSymbol) {\n  const short = `${fromSymbol}/${toSymbol}`\n  return {\n    short,\n    full: `${exchange}:${short}`,\n  }\n}\n\nexport function parseFullSymbol (fullSymbol) {\n  const match = fullSymbol.match(/^(\\w+):(\\w+)\\/(\\w+)(?:#(\\w+))?$/)\n  if (!match) {\n    return null\n  }\n\n  return {\n    exchange: match[1],\n    fromSymbol: match[2],\n    toSymbol: match[3],\n    fragment: match[4],\n  }\n}\n","import { parseFullSymbol } from './helpers.js'\n\nconst socket = io('wss://streamer.cryptocompare.com')\nconst channelToSubscription = new Map()\n\nsocket.on('connect', () => {\n  console.log('[socket] Connected')\n})\n\nsocket.on('disconnect', (reason) => {\n  console.log('[socket] Disconnected:', reason)\n})\n\nsocket.on('error', (error) => {\n  console.log('[socket] Error:', error)\n})\n\nsocket.on('m', data => {\n  console.log('[socket] Message:', data)\n  const [\n    eventTypeStr,\n    exchange,\n    fromSymbol,\n    toSymbol,\n    ,\n    ,\n    tradeTimeStr,\n    ,\n    tradePriceStr,\n  ] = data.split('~')\n\n  if (parseInt(eventTypeStr) !== 0) {\n    // skip all non-TRADE events\n    return\n  }\n  const tradePrice = parseFloat(tradePriceStr)\n  const tradeTime = parseInt(tradeTimeStr)\n  const channelString = `0~${exchange}~${fromSymbol}~${toSymbol}`\n  const subscriptionItem = channelToSubscription.get(channelString)\n  if (subscriptionItem === undefined) {\n    return\n  }\n  const lastDailyBar = subscriptionItem.lastDailyBar\n  const nextDailyBarTime = getNextDailyBarTime(lastDailyBar.time)\n\n  let bar\n  if (tradeTime >= nextDailyBarTime) {\n    bar = {\n      time: nextDailyBarTime,\n      open: tradePrice,\n      high: tradePrice,\n      low: tradePrice,\n      close: tradePrice,\n    }\n    console.log('[socket] Generate new bar', bar)\n  } else {\n    bar = {\n      ...lastDailyBar,\n      high: Math.max(lastDailyBar.high, tradePrice),\n      low: Math.min(lastDailyBar.low, tradePrice),\n      close: tradePrice,\n    }\n    console.log('[socket] Update the latest bar by price', tradePrice)\n  }\n  subscriptionItem.lastDailyBar = bar\n\n  // send data to every subscriber of that symbol\n  subscriptionItem.handlers.forEach(handler => handler.callback(bar))\n})\n\nfunction getNextDailyBarTime (barTime) {\n  const date = new Date(barTime * 1000)\n  date.setDate(date.getDate() + 1)\n  return date.getTime() / 1000\n}\n\nexport function subscribeOnStream (\n  symbolInfo,\n  resolution,\n  onRealtimeCallback,\n  subscribeUID,\n  onResetCacheNeededCallback,\n  lastDailyBar,\n) {\n  const parsedSymbol = parseFullSymbol(symbolInfo.full_name)\n  const channelString = `0~${parsedSymbol.exchange}~${parsedSymbol.fromSymbol}~${parsedSymbol.toSymbol}`\n  const handler = {\n    id: subscribeUID,\n    callback: onRealtimeCallback,\n  }\n  let subscriptionItem = channelToSubscription.get(channelString)\n  if (subscriptionItem) {\n    // already subscribed to the channel, use the existing subscription\n    subscriptionItem.handlers.push(handler)\n    return\n  }\n  subscriptionItem = {\n    subscribeUID,\n    resolution,\n    lastDailyBar,\n    handlers: [handler],\n  }\n  channelToSubscription.set(channelString, subscriptionItem)\n  console.log('[subscribeBars]: Subscribe to streaming. Channel:', channelString)\n  socket.emit('SubAdd', { subs: [channelString] })\n}\n\nexport function unsubscribeFromStream (subscriberUID) {\n  // find a subscription with id === subscriberUID\n  for (const channelString of channelToSubscription.keys()) {\n    const subscriptionItem = channelToSubscription.get(channelString)\n    const handlerIndex = subscriptionItem.handlers\n      .findIndex(handler => handler.id === subscriberUID)\n\n    if (handlerIndex !== -1) {\n      // remove from handlers\n      subscriptionItem.handlers.splice(handlerIndex, 1)\n\n      if (subscriptionItem.handlers.length === 0) {\n        // unsubscribe from the channel, if it was the last handler\n        console.log('[unsubscribeBars]: Unsubscribe from streaming. Channel:', channelString)\n        socket.emit('SubRemove', { subs: [channelString] })\n        channelToSubscription.delete(channelString)\n        break\n      }\n    }\n  }\n}\n","import fetch from 'node-fetch'\n\nexport default (PineJS) => ({\n  name: 'BinanceOI',\n  metainfo: {\n    _metainfoVersion: 42,\n\n    id: 'BinanceOI@tv-basicstudies-1',\n\n    name: 'BinanceOI',\n    description: 'Binance Open Interest',\n    shortDescription: 'BinanceOI',\n    scriptIdPart: '',\n\n    is_price_study: false,\n    is_hidden_study: true,\n    isCustomIndicator: true,\n\n    isTVScript: false,\n    isTVScriptStub: false,\n    inputs: [],\n\n    plots: [{\n      id: 'plot_0',\n      type: 'line',\n    }, {\n      id: 'plot_hidden',\n      type: 'line',\n    }],\n\n    defaults: {\n      styles: {\n        plot_0: {\n          linestyle: 0,\n          visible: !0,\n          linewidth: 2,\n          plottype: 2,\n          trackPrice: !1,\n          transparency: 0,\n          color: '#63c5ff',\n        },\n        plot_hidden: {\n          isHidden: !0,\n          visible: !1,\n          trackPrice: !1,\n        },\n      },\n      precision: 0,\n      inputs: {},\n    },\n    styles: {\n      plot_0: {\n        title: 'Open interest',\n        histogramBase: 0,\n      },\n    },\n  },\n  constructor: function () {\n    this.init = function (context, input) {\n      this._context = context\n      this._input = input\n\n      const period = PineJS.Std.period(this._context)\n\n      // https://github.com/tradingview/charting_library/issues/4019\n      let t = context.symbol.ticker\n      t = t.substring(1, t.length - 2)\n\n      const symbol = t + '#BUYSELL'\n      this._context.new_sym(symbol, period, period)\n    }\n\n    this.main = function (context, input) {\n      this._context = context\n      this._input = input\n\n      this._context.select_sym(1)\n      return [PineJS.Std.close(this._context)]\n    }\n  },\n})\n\nexport async function makeReq (endpoint, period, symbol, limit) {\n  const proxy = 'https://blep-cors.herokuapp.com'\n  const bnbAPI = 'https://fapi.binance.com'\n\n  try {\n    const res = await fetch(`${proxy}/${bnbAPI}${endpoint}/?symbol=${symbol}&period=${period}&limit=${limit}`)\n    if (!res.ok) throw Error(res.statusText)\n    return res.json()\n  } catch (error) {\n    console.error(error)\n  }\n}\n\nexport const x = [{\n  name: 'Social index',\n  metainfo: {\n    _metainfoVersion: 40,\n    id: 'BuySell@tv-basicstudies-1',\n    scriptIdPart: '',\n    name: 'Social index',\n    description: 'Social index',\n    shortDescription: 'Social index',\n    is_hidden_study: !0,\n    is_price_study: !1,\n    isCustomIndicator: !0,\n    plots: [{\n      id: 'plot_0',\n      type: 'line',\n    }, {\n      id: 'plot_hidden',\n      type: ' line',\n    }],\n    defaults: {\n      styles: {\n        plot_0: {\n          linestyle: 0,\n          visible: !0,\n          linewidth: 1,\n          plottype: 5,\n          trackPrice: !1,\n          transparency: 0,\n          color: '#6FCF97',\n        },\n        plot_hidden: {\n          isHidden: !0,\n          visible: !1,\n          trackPrice: !1,\n        },\n      },\n      precision: 2,\n      inputs: {},\n    },\n    styles: {\n      plot_0: {\n        title: 'Social index',\n        histogramBase: 0,\n      },\n    },\n    inputs: [],\n  },\n  constructor: function () {\n    this.init = function (t, n) {\n      this._context = t,\n      this._input = n\n      var a = e.Std.period(this._context)\n      var r = t.symbol.ticker + '#BUYSELL'\n      this._context.new_sym(r, a, a)\n    }\n    ,\n    this.main = function (t, n) {\n      return this._context = t,\n      this._input = n,\n      this._context.select_sym(1),\n      [e.Std.close(this._context)]\n    }\n  },\n}, {\n  name: 'Open interest',\n  metainfo: {\n    _metainfoVersion: 40,\n    id: 'Oi@tv-basicstudies-1',\n    scriptIdPart: '',\n    name: 'Open interest',\n    description: 'Open interest',\n    shortDescription: 'Open interest',\n    is_hidden_study: !0,\n    is_price_study: !1,\n    isCustomIndicator: !0,\n    plots: [{\n      id: 'plot_0',\n      type: 'line',\n    }, {\n      id: 'plot_hidden',\n      type: 'line',\n    }],\n    defaults: {\n      styles: {\n        plot_0: {\n          linestyle: 0,\n          visible: !0,\n          linewidth: 2,\n          plottype: 2,\n          trackPrice: !1,\n          transparency: 0,\n          color: '#63c5ff',\n        },\n        plot_hidden: {\n          isHidden: !0,\n          visible: !1,\n          trackPrice: !1,\n        },\n      },\n      precision: 0,\n      inputs: {},\n    },\n    styles: {\n      plot_0: {\n        title: 'Open interest',\n        histogramBase: 0,\n      },\n    },\n    inputs: [],\n  },\n  constructor: function () {\n    this.init = function (t, n) {\n      this._context = t,\n      this._input = n\n      var a = e.Std.period(this._context)\n      var r = t.symbol.ticker + '#OI'\n      this._context.new_sym(r, a, a)\n    }\n    ,\n    this.main = function (t, n) {\n      return this._context = t,\n      this._input = n,\n      this._context.select_sym(1),\n      [e.Std.close(this._context)]\n    }\n  },\n}, {\n  name: 'Open Value',\n  metainfo: {\n    _metainfoVersion: 40,\n    id: 'Ov@tv-basicstudies-1',\n    scriptIdPart: '',\n    name: 'Open Value',\n    description: 'Open Value',\n    shortDescription: 'Open Value',\n    is_hidden_study: !0,\n    is_price_study: !1,\n    isCustomIndicator: !0,\n    plots: [{\n      id: 'plot_0',\n      type: 'line',\n    }, {\n      id: 'plot_hidden',\n      type: 'line',\n    }],\n    defaults: {\n      styles: {\n        plot_0: {\n          linestyle: 0,\n          visible: !0,\n          linewidth: 2,\n          plottype: 2,\n          trackPrice: !1,\n          transparency: 0,\n          color: '#FFC62A',\n        },\n        plot_hidden: {\n          isHidden: !0,\n          visible: !1,\n          trackPrice: !1,\n        },\n      },\n      precision: 0,\n      inputs: {},\n    },\n    styles: {\n      plot_0: {\n        title: 'Open interest',\n        histogramBase: 0,\n      },\n    },\n    inputs: [],\n  },\n  constructor: function () {\n    this.init = function (t, n) {\n      this._context = t,\n      this._input = n\n      var a = e.Std.period(this._context)\n      var r = t.symbol.ticker + '#OV'\n      this._context.new_sym(r, a, a)\n    }\n    ,\n    this.main = function (t, n) {\n      return this._context = t,\n      this._input = n,\n      this._context.select_sym(1),\n      [e.Std.close(this._context)]\n    }\n  },\n}, {\n  name: 'Fear & Greed Index',\n  metainfo: {\n    _metainfoVersion: 40,\n    id: 'Fg@tv-basicstudies-1',\n    scriptIdPart: '',\n    name: 'Fear & Greed Index',\n    description: 'Fear & Greed Index',\n    shortDescription: 'Fear & Greed Index',\n    is_hidden_study: !0,\n    is_price_study: !1,\n    isCustomIndicator: !0,\n    plots: [{\n      id: 'plot_0',\n      type: 'line',\n    }, {\n      id: 'plot_hidden',\n      type: 'line',\n    }],\n    defaults: {\n      styles: {\n        plot_0: {\n          linestyle: 0,\n          visible: !0,\n          linewidth: 2,\n          plottype: 5,\n          trackPrice: !1,\n          transparency: 0,\n          color: '#6FCF97',\n        },\n        plot_hidden: {\n          isHidden: !0,\n          visible: !1,\n          trackPrice: !1,\n        },\n      },\n      precision: 0,\n      inputs: {},\n    },\n    styles: {\n      plot_0: {\n        title: 'Fear & Greed Index',\n        histogramBase: 50,\n      },\n    },\n    inputs: [],\n  },\n  constructor: function () {\n    this.init = function (t, n) {\n      this._context = t,\n      this._input = n\n      var a = e.Std.period(this._context)\n      var r = t.symbol.ticker + '#FG'\n      this._context.new_sym(r, a, a)\n    }\n    ,\n    this.main = function (t, n) {\n      this._context = t,\n      this._input = n,\n      this._context.select_sym(1)\n      var a = e.Std.close(this._context)\n      return [a === 50 ? 51 : a]\n    }\n  },\n}, {\n  name: 'Bitmex Liquidations',\n  metainfo: {\n    _metainfoVersion: 40,\n    id: 'Liq@tv-basicstudies-1',\n    scriptIdPart: '',\n    name: 'Bitmex Liquidations',\n    description: 'Bitmex Liquidations',\n    shortDescription: 'Bitmex Liquidations',\n    is_hidden_study: !0,\n    is_price_study: !1,\n    isCustomIndicator: !0,\n    plots: [{\n      id: 'plot_0',\n      type: 'line',\n    }, {\n      id: 'plot_1',\n      type: 'line',\n    }],\n    defaults: {\n      styles: {\n        plot_0: {\n          linestyle: 0,\n          visible: !0,\n          linewidth: 1,\n          plottype: 5,\n          trackPrice: !1,\n          transparency: 0,\n          color: '#6FCF97',\n        },\n        plot_1: {\n          linestyle: 0,\n          visible: !0,\n          linewidth: 1,\n          plottype: 5,\n          trackPrice: !1,\n          transparency: 0,\n          color: '#EB5757',\n        },\n      },\n      precision: 0,\n      inputs: {},\n    },\n    styles: {\n      plot_0: {\n        title: 'Bitmex Liquidations (Short)',\n        histogramBase: 0,\n      },\n      plot_1: {\n        title: 'Bitmex Liquidations (Long)',\n        histogramBase: 0,\n      },\n    },\n    inputs: [],\n  },\n  constructor: function () {\n    this.init = function (t, n) {\n      this._context = t,\n      this._input = n\n      var a = e.Std.period(this._context)\n      var r = t.symbol.ticker + '#LIQ'\n      this._context.new_sym(r, a, a)\n    }\n    ,\n    this.main = function (t, n) {\n      this._context = t,\n      this._input = n,\n      this._context.select_sym(1)\n      var a = e.Std.close(this._context)\n      return [e.Std.open(this._context) || 0, -a || 0]\n    }\n  },\n}]\n","import {\n  makeApiRequest,\n  generateSymbol,\n  parseFullSymbol,\n} from './helpers.js'\nimport {\n  subscribeOnStream,\n  unsubscribeFromStream,\n} from './streaming.js'\n\nimport { makeReq } from './indicators/binance_open_interest'\n\nconst lastBarsCache = new Map()\n\nconst configurationData = {\n  supported_resolutions: ['1S', '1D', '1W', '1M'],\n  exchanges: [{\n    value: 'Bitfinex',\n    name: 'Bitfinex',\n    desc: 'Bitfinex',\n  },\n  {\n    // `exchange` argument for the `searchSymbols` method, if a user selects this exchange\n    value: 'Kraken',\n\n    // filter name\n    name: 'Kraken',\n\n    // full exchange name displayed in the filter popup\n    desc: 'Kraken bitcoin exchange',\n  },\n  ],\n  symbols_types: [{\n    name: 'crypto',\n\n    // `symbolType` argument for the `searchSymbols` method, if a user selects this symbol type\n    value: 'crypto',\n  },\n    // ...\n  ],\n}\n\nasync function getAllSymbols () {\n  const data = await makeApiRequest('data/v3/all/exchanges')\n  let allSymbols = []\n\n  for (const exchange of configurationData.exchanges) {\n    const pairs = data.Data[exchange.value].pairs\n\n    for (const leftPairPart of Object.keys(pairs)) {\n      const symbols = pairs[leftPairPart].map(rightPairPart => {\n        const symbol = generateSymbol(exchange.value, leftPairPart, rightPairPart)\n        return {\n          symbol: symbol.short,\n          full_name: symbol.full,\n          description: symbol.short,\n          exchange: exchange.value,\n          type: 'crypto',\n        }\n      })\n      allSymbols = [...allSymbols, ...symbols]\n    }\n  }\n  return allSymbols\n}\n\nexport default {\n  onReady: (callback) => {\n    console.log('[onReady]: Method call')\n    setTimeout(() => callback(configurationData))\n  },\n\n  searchSymbols: async (\n    userInput,\n    exchange,\n    symbolType,\n    onResultReadyCallback,\n  ) => {\n    console.log('[searchSymbols]: Method call')\n    const symbols = await getAllSymbols()\n    const newSymbols = symbols.filter(symbol => {\n      const isExchangeValid = exchange === '' || symbol.exchange === exchange\n      const isFullSymbolContainsInput = symbol.full_name\n        .toLowerCase()\n        .indexOf(userInput.toLowerCase()) !== -1\n      return isExchangeValid && isFullSymbolContainsInput\n    })\n    onResultReadyCallback(newSymbols)\n  },\n\n  resolveSymbol: async (\n    symbolName,\n    onSymbolResolvedCallback,\n    onResolveErrorCallback,\n  ) => {\n    console.log('[resolveSymbol]: Method call', symbolName)\n\n    // If fragment exists in symbolName, then it's an indicator ticker and shouldn't query the symbol list\n    const { exchange, fromSymbol, toSymbol, fragment } = parseFullSymbol(symbolName)\n    if (fragment) {\n      const name = `${fromSymbol}/${toSymbol}`\n\n      const symbolInfo = {\n        name: `${name}#${fragment}`,\n        description: `${name}#${fragment}`,\n        type: 'crypto',\n        session: '24x7',\n        timezone: 'Etc/UTC',\n        exchange: exchange,\n        minmov: 1,\n        pricescale: 100,\n        has_intraday: false,\n        has_no_volume: true,\n        has_weekly_and_monthly: false,\n        supported_resolutions: configurationData.supported_resolutions,\n        volume_precision: 2,\n        data_status: 'streaming',\n      }\n\n      console.log('[resolveSymbol]: Symbol resolved', symbolName)\n      onSymbolResolvedCallback(symbolInfo)\n      return\n    }\n\n    const symbols = await getAllSymbols()\n\n    const symbolItem = symbols.find(({ full_name }) => full_name === symbolName)\n    if (!symbolItem) {\n      console.log('[resolveSymbol]: Cannot resolve symbol', symbolName)\n      onResolveErrorCallback('cannot resolve symbol')\n      return\n    }\n    const symbolInfo = {\n      name: symbolItem.symbol,\n      description: symbolItem.description,\n      type: symbolItem.type,\n      session: '24x7',\n      timezone: 'Etc/UTC',\n      exchange: symbolItem.exchange,\n      minmov: 1,\n      pricescale: 100,\n      has_intraday: false,\n      has_no_volume: true,\n      has_weekly_and_monthly: false,\n      supported_resolutions: configurationData.supported_resolutions,\n      volume_precision: 2,\n      data_status: 'streaming',\n    }\n\n    console.log('[resolveSymbol]: Symbol resolved', symbolName)\n    onSymbolResolvedCallback(symbolInfo)\n  },\n\n  getBars: async (symbolInfo, resolution, from, to, onHistoryCallback, onErrorCallback, firstDataRequest) => {\n    console.log('[getBars]: Method call', symbolInfo, resolution, from, to)\n    const parsedSymbol = parseFullSymbol(symbolInfo.full_name)\n\n    // for debugging ths chart output\n    /* function randomBars (from, to) {\n      let bars = []\n      for (let t = from; t < to; t += 86400) { // from/to are in seconds\n        bars = [...bars, {\n          time: t * 1000, // milliseconds\n          close: Math.random() * 100,\n        }]\n      }\n      return bars\n\t\t} */\n\n    // if it has fragment then it's an indicator symbol\n    if (parsedSymbol.fragment) {\n      const data = await makeReq('/futures/data/openInterestHist', '1d', 'BTCUSDT', 30)\n\n      let bars = []\n\n      data.forEach(b => {\n        if (b.timestamp / 1000 >= from && b.timstamp / 1000 < to) {\n          bars = [...bars, {\n            time: b.timestamp,\n            close: b.sumOpenInterest,\n          }]\n        }\n      })\n\n      onHistoryCallback(bars, { noData: false })\n      return\n    }\n\n    const urlParameters = {\n      e: parsedSymbol.exchange,\n      fsym: parsedSymbol.fromSymbol,\n      tsym: parsedSymbol.toSymbol,\n      toTs: to,\n      limit: 2000,\n    }\n    const query = Object.keys(urlParameters)\n      .map(name => `${name}=${encodeURIComponent(urlParameters[name])}`)\n      .join('&')\n    try {\n      const data = await makeApiRequest(`data/histoday?${query}`)\n      if ((data.Response && data.Response === 'Error') || data.Data.length === 0) {\n        // \"noData\" should be set if there is no data in the requested period.\n        onHistoryCallback([], {\n          noData: true,\n        })\n        return\n      }\n      let bars = []\n      data.Data.forEach(bar => {\n        if (bar.time >= from && bar.time < to) {\n          bars = [...bars, {\n            time: bar.time * 1000,\n            low: bar.low,\n            high: bar.high,\n            open: bar.open,\n            close: bar.close,\n          }]\n        }\n      })\n      if (firstDataRequest) {\n        lastBarsCache.set(symbolInfo.full_name, {\n          ...bars[bars.length - 1],\n        })\n      }\n      console.log(`[getBars]: returned ${bars.length} bar(s)`)\n      onHistoryCallback(bars, {\n        noData: false,\n      })\n    } catch (error) {\n      console.log('[getBars]: Get error', error)\n      onErrorCallback(error)\n    }\n  },\n\n  subscribeBars: (\n    symbolInfo,\n    resolution,\n    onRealtimeCallback,\n    subscribeUID,\n    onResetCacheNeededCallback,\n  ) => {\n    console.log('[subscribeBars]: Method call with subscribeUID:', subscribeUID)\n\n    const { fragment } = parseFullSymbol(symbolInfo.full_name)\n\n    if (!fragment) {\n      subscribeOnStream(\n        symbolInfo,\n        resolution,\n        onRealtimeCallback,\n        subscribeUID,\n        onResetCacheNeededCallback,\n        lastBarsCache.get(symbolInfo.full_name),\n      )\n    }\n  },\n\n  unsubscribeBars: (subscriberUID) => {\n    console.log('[unsubscribeBars]: Method call with subscriberUID:', subscriberUID)\n    unsubscribeFromStream(subscriberUID)\n  },\n}\n","import * as React from 'react'\n// import './index.css'\nimport { widget } from './charting_library/charting_library.min'\nimport Datafeed from './datafeed'\n\nimport BinanceOI from './indicators/binance_open_interest'\n\nfunction getLanguageFromURL () {\n  const regex = new RegExp('[\\\\?&]lang=([^&#]*)')\n  const results = regex.exec(window.location.search)\n  return results === null ? null : decodeURIComponent(results[1].replace(/\\+/g, ' '))\n}\n\nexport default class TVChartContainer extends React.PureComponent {\n\tstatic defaultProps = {\n\t  symbol: 'Bitfinex:BTC/USD',\n\t  interval: '1D',\n\t  containerId: 'tv_chart_container',\n\t  libraryPath: '/charting_library/',\n\t  chartsStorageUrl: 'https://saveload.tradingview.com',\n\t  chartsStorageApiVersion: '1.1',\n\t  clientId: 'tradingview.com',\n\t  userId: 'public_user_id',\n\t  fullscreen: false,\n\t  autosize: true,\n\t  studiesOverrides: {},\n\t  customIndicatorsGetter: function (PineJS) {\n\t    return Promise.resolve([\n\t      BinanceOI(PineJS),\n\t      // *** your indicator object, created from the template ***\n\t    ])\n\t  },\n\t};\n\n\ttvWidget = null;\n\n\tcomponentDidMount () {\n\t  const widgetOptions = {\n\t    symbol: this.props.symbol,\n\t    datafeed: Datafeed,\n\t    interval: this.props.interval,\n\t    container_id: this.props.containerId,\n\t    library_path: this.props.libraryPath,\n\n\t    locale: getLanguageFromURL() || 'en',\n\t    disabled_features: ['use_localstorage_for_settings'],\n\t    enabled_features: ['study_templates'],\n\t    charts_storage_url: this.props.chartsStorageUrl,\n\t    charts_storage_api_version: this.props.chartsStorageApiVersion,\n\t    client_id: this.props.clientId,\n\t    user_id: this.props.userId,\n\t    fullscreen: this.props.fullscreen,\n\t    autosize: this.props.autosize,\n\t    studies_overrides: this.props.studiesOverrides,\n\t    custom_indicators_getter: this.props.customIndicatorsGetter,\n\t  }\n\n\t  const tvWidget = new widget(widgetOptions)\n\t  this.tvWidget = tvWidget\n\n\t  tvWidget.onChartReady(() => {\n\t    tvWidget.headerReady().then(() => {\n\t      const button = tvWidget.createButton()\n\t      button.setAttribute('title', 'Click to show a notification popup')\n\t      button.classList.add('apply-common-tooltip')\n\t      button.addEventListener('click', () => tvWidget.showNoticeDialog({\n\t        title: 'Notification',\n\t        body: 'TradingView Charting Library API works correctly',\n\t        callback: () => {\n\t          console.log('Noticed!')\n\t        },\n\t      }))\n\n\t      button.innerHTML = 'Custom Btn'\n\t    })\n\n\t    tvWidget.chart().createStudy('Binance Open Interest', false, true)\n\t  })\n\t}\n\n\tcomponentWillUnmount () {\n\t  if (this.tvWidget !== null) {\n\t    this.tvWidget.remove()\n\t    this.tvWidget = null\n\t  }\n\t}\n\n\trender () {\n\t  return (\n  <div id={this.props.containerId} className='self-stretch w-full TVChartContainer' />\n\t  )\n\t}\n}\n","import React, { Component } from 'react'\nimport Layout from '../components/Layout'\n// import './App.css'\n\nimport TVChartContainer from '../components/TVChartContainer'\n\nexport default class Chart1 extends Component {\n  render () {\n    return (\n      <Layout includePreFooter={false}>\n        <div className='flex flex-grow'>\n          <TVChartContainer />\n        </div>\n      </Layout>\n    )\n  }\n}\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e(t.TradingView={})}(this,function(t){\"use strict\";var e=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t};function o(t,i){var n=e({},t);for(var s in i)\"object\"!=typeof t[s]||null===t[s]||Array.isArray(t[s])?void 0!==i[s]&&(n[s]=i[s]):n[s]=o(t[s],i[s]);return n}var i={mobile:{disabled_features:[\"left_toolbar\",\"header_widget\",\"timeframes_toolbar\",\"edit_buttons_in_legend\",\"context_menus\",\"control_bar\",\"border_around_the_chart\"],enabled_features:[]}},n={width:800,height:500,interval:\"D\",timezone:\"Etc/UTC\",container_id:\"\",library_path:\"\",locale:\"en\",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{\"mainSeriesProperties.showCountdown\":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:\"5y\",resolution:\"W\"},{text:\"1y\",resolution:\"W\"},{text:\"6m\",resolution:\"120\"},{text:\"3m\",resolution:\"60\"},{text:\"1m\",resolution:\"30\"},{text:\"5d\",resolution:\"5\"},{text:\"1d\",resolution:\"1\"}],client_id:\"0\",user_id:\"0\",charts_storage_api_version:\"1.0\",favorites:{intervals:[],chartTypes:[]}};function s(){return\"1.15 (internal id 37fbf462 @ 2020-04-24 15:44:13.516973)\"}var r=function(){function t(t){if(this._id=\"tradingview_\"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error(\"Datafeed is not defined\");if(this._options=o(n,t),t.preset){var e=i[t.preset];e?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(e.disabled_features):this._options.disabled_features=e.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(e.enabled_features):this._options.enabled_features=e.enabled_features):console.warn(\"Unknown preset: `\"+t.preset+\"`\")}\"Dark\"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:\"#131722\"}),this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.headerReady=function(){var t=this;return this._innerWindowLoaded.then(function(){return t._innerWindow().headerReady()})},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},t.prototype.setSymbol=function(t,e,o){this._innerAPI().changeSymbol(t,e+\"\",o)},t.prototype.remove=function(){window.removeEventListener(\"resize\",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,o){this._innerAPI().saveChartToServer(t,e,o)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=o(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(t){this._innerWindow().changeTheme(t)},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},t.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+\"px\")},t.prototype._create=function(){var t=this,e=this._render(),o=document.getElementById(this._options.container_id);if(null===o)throw new Error(\"There is no such element - #\"+this._options.container_id);o.innerHTML=e,this._iFrame=o.querySelector(\"#\"+this._id);var i=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(i.style.width=\"100%\",this._options.fullscreen||(i.style.height=\"100%\")),window.addEventListener(\"resize\",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(t){var e=function(){i.removeEventListener(\"load\",e,!1),t()};i.addEventListener(\"load\",e,!1)}),this._innerWindowLoaded.then(function(){t._innerWindow().widgetReady(function(){t._ready=!0;for(var e=0,o=t._readyHandlers;e<o.length;e++){var i=o[e];try{i.call(t)}catch(t){console.error(t)}}t._innerWindow().initializationFinished()})})},t.prototype._render=function(){var t=window;if(t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data)t[this._id].chartContent={json:this._options.saved_data};else if(!Boolean(this._options.symbol))throw new Error(\"Symbol is not defined\");var e=(this._options.library_path||\"\")+\"static/\"+encodeURIComponent(this._options.locale)+\"-tv-chart.37fbf462d076e305ceee.html#symbol=\"+encodeURIComponent(this._options.symbol||\"\")+\"&interval=\"+encodeURIComponent(this._options.interval)+(this._options.timeframe?\"&timeframe=\"+encodeURIComponent(this._options.timeframe):\"\")+(this._options.toolbar_bg?\"&toolbarbg=\"+encodeURIComponent(this._options.toolbar_bg.replace(\"#\",\"\")):\"\")+(this._options.studies_access?\"&studiesAccess=\"+encodeURIComponent(JSON.stringify(this._options.studies_access)):\"\")+\"&widgetbar=\"+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?\"&drawingsAccess=\"+encodeURIComponent(JSON.stringify(this._options.drawings_access)):\"\")+\"&timeFrames=\"+encodeURIComponent(JSON.stringify(this._options.time_frames))+\"&locale=\"+encodeURIComponent(this._options.locale)+\"&uid=\"+encodeURIComponent(this._id)+\"&clientId=\"+encodeURIComponent(String(this._options.client_id))+\"&userId=\"+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?\"&chartsStorageUrl=\"+encodeURIComponent(this._options.charts_storage_url):\"\")+(this._options.charts_storage_api_version?\"&chartsStorageVer=\"+encodeURIComponent(this._options.charts_storage_api_version):\"\")+(this._options.custom_css_url?\"&customCSS=\"+encodeURIComponent(this._options.custom_css_url):\"\")+(this._options.auto_save_delay?\"&autoSaveDelay=\"+encodeURIComponent(String(this._options.auto_save_delay)):\"\")+\"&debug=\"+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?\"&snapshotUrl=\"+encodeURIComponent(this._options.snapshot_url):\"\")+(this._options.timezone?\"&timezone=\"+encodeURIComponent(this._options.timezone):\"\")+(this._options.study_count_limit?\"&studyCountLimit=\"+encodeURIComponent(String(this._options.study_count_limit)):\"\")+(this._options.symbol_search_request_delay?\"&ssreqdelay=\"+encodeURIComponent(String(this._options.symbol_search_request_delay)):\"\")+(this._options.theme?\"&theme=\"+encodeURIComponent(String(this._options.theme)):\"\");return'<iframe id=\"'+this._id+'\" name=\"'+this._id+'\"  src=\"'+e+'\"'+(this._options.autosize||this._options.fullscreen?\"\":' width=\"'+this._options.width+'\" height=\"'+this._options.height+'\"')+' frameborder=\"0\" allowTransparency=\"true\" scrolling=\"no\" allowfullscreen style=\"display:block;\"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=s,t.version=s,t.widget=r,Object.defineProperty(t,\"__esModule\",{value:!0})});\n"],"sourceRoot":""}